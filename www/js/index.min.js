"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(){function a(a,b){var c=document.querySelectorAll(a);c.forEach(function(a){return a.classList.add(b)})}function b(a,b){b?console.dir(a):console.log(a)}function c(a,b,c){c?setTimeout(function(){document.querySelector(a).innerHTML=b},c):document.querySelector(a).innerHTML=b}function d(a,b){var c=document.querySelectorAll(a);c.forEach(function(a){return a.classList.remove(b)})}function e(a){var b=document.querySelector(a);b.parentNode.removeChild(b)}function f(a,b){document.querySelector(a).removeAttribute(b)}function g(){window.scrollTo(0,0)}function h(a,b,c){document.querySelector(a).setAttribute(b,c)}Shiny.addCustomMessageHandler("add_css",function(b){a(b[0],b[1])}),Shiny.addCustomMessageHandler("console_log",function(a){b(a[0],a[1])}),Shiny.addCustomMessageHandler("inner_html",function(a){c(a[0],a[1],a[2])}),Shiny.addCustomMessageHandler("remove_css",function(a){d(a[0],a[1])}),Shiny.addCustomMessageHandler("remove_elem",function(a){e(a)}),Shiny.addCustomMessageHandler("remove_element_attribute",function(a){f(a[0],a[1])}),Shiny.addCustomMessageHandler("set_element_attribute",function(a){h(a[0],a[1],a[2])}),Shiny.addCustomMessageHandler("scroll_to_top",function(a){g(a)})})();var accordions=function(){return{addToggles:function(){var a=document.querySelectorAll(".accordion-button");a.forEach(function(a){a.addEventListener("click",function(){var b=a.getAttribute("data-name","value"),c=document.querySelector("svg[data-name=\"".concat(b,"\"]")),d=document.querySelector("section[data-name=\"".concat(b,"\"]"));d.classList.toggle("visually-hidden"),c.classList.toggle("rotated"),"false"===a.getAttribute("aria-expanded","value")?(a.setAttribute("aria-expanded",!0),d.removeAttribute("hidden")):(a.setAttribute("aria-expanded","false"),d.setAttribute("hidden",""))})})}}}();(function(){function a(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}var b=document.getElementById("toggle"),c=document.getElementById("navlinks"),d=document.querySelector("body"),e=d.getBoundingClientRect().width,f=document.querySelectorAll(".nav .menu-link");f.forEach(function(d){d.addEventListener("click",function(d){d.preventDefault(),Shiny.setInputValue(d.target.id,d.target.id,{priority:"event"}),document.title="shinyTravel | ".concat(a(d.target.innerText)),"true"===b.getAttribute("aria-expanded")&&(c.classList.remove("expanded"),b.classList.remove("open"),b.setAttribute("aria-expanded","false"),c.setAttribute("hidden","true"))})}),document.addEventListener("DOMContentLoaded",function(){912<e&&c.setAttribute("hidden","false"),912>=e&&c.setAttribute("hidden","true")}),b.addEventListener("click",function(){c.classList.toggle("expanded"),b.classList.toggle("open"),"false"===b.getAttribute("aria-expanded")?(b.setAttribute("aria-expanded",!0),c.removeAttribute("hidden")):(b.setAttribute("aria-expanded","false"),c.setAttribute("hidden","true"))}),window.addEventListener("resize",function(){var a=d.getBoundingClientRect().width;912<=a&&!0===b.getAttribute("aria-expanded")&&(c.classList.remove("expanded"),c.removeAttribute("hidden"),b.classList.remove("open"),b.setAttribute("aria-expanded","false"))})})(),function(){function a(a,c,d,e){var f=250,g=d3.select(a).append("svg").attr("class","d3-viz d3-map top-three-cities-maps").attr("width",250).attr("height",f),h=d3.geoMercator().scale(1).translate([0,0]),i=d3.geoPath().projection(h),j=i.bounds(e[0]),b=.8/Math.max((j[1][0]-j[0][0])/250,(j[1][1]-j[0][1])/f),k=[(250-b*(j[1][0]+j[0][0]))/2,(f-b*(j[1][1]+j[0][1]))/2];h=h.scale(b).translate(k);var l=g.append("g").attr("data-city",d);l.selectAll("path").data(e).enter().append("path").attr("fill","#bdbdbd").attr("stroke","#c4c4c4").attr("d",i),l.selectAll("circle").data([c]).enter().append("circle").attr("cx",function(a){return h(a)[0]}).attr("cy",function(a){return h(a)[1]}).attr("r","9px").attr("fill","rgb(174, 117, 159)"),l.selectAll("rect").data(e).enter().append("rect").attr("x",0).attr("y",220).attr("width",250).attr("height",30).attr("fill","hsla(215, 45%, 53%, 0.35)"),l.selectAll("text").data([d]).enter().append("text").attr("x",125).attr("y",240).attr("text-anchor","middle").text(function(a){return a})}function b(b,c,d){d3.selectAll("#recommended-cities .top-three-cities-maps, #recommended-cities .error").remove();d3.json("../data/eu.topojson",function(a){if(repsonse.ok)return a;throw a}).then(function(e){var f=[b.country,c.country,d.country].map(function(a){return"Czech Republic"===a?"Czech Rep.":a}),g=topojson.feature(e,e.objects.europe);if(g.features=g.features.filter(function(a){return-1<f.indexOf(a.properties.name)}),!1!==b){var h=[b.lng,b.lat],i=g.features.filter(function(a){return a.properties.name===f[0]});a("#recommended-cities",h,b.city,i)}if(!1!==c){var j=[c.lng,c.lat],k=g.features.filter(function(a){return a.properties.name===f[1]});a("#recommended-cities",j,c.city,k)}if(!1!==d){var l=[d.lng,d.lat],m=g.features.filter(function(a){return a.properties.name===f[2]});a("#recommended-cities",l,d.city,m)}b||c||d||d3.select("#recommended-cities").append("p").attr("class","error").text("Sorry, no results were returned. Either select more countries or reset the number of cities to remove.")})["catch"](function(a){d3.select("#recommended-cities").append("p").attr("class","error").text("ERROR: ".concat(a)),console.log(a)})}Shiny.addCustomMessageHandler("render_top_city_maps",function(a){var c,d,e;0<a.length?(1===a.length&&(c=a[0],d=!1,e=!1),2===a.length&&(c=a[0],d=a[1],e=!1),3===a.length&&(c=a[0],d=a[1],e=a[2])):(c=!1,d=!1,e=!1),b(c,d,e)})}(),function(){function a(a,b){var c,d=_typeof(a);return"number"===d?0<a?c="datatype-number value-positive":0>a?c="datatype-number value-negative":0==a&&(c="datatype-number value-zero"):c="datatype-".concat(_typeof(a)),c=c+" column-"+(b+1),c}function b(b){var c=b.id,d=b.data,e=b.columns,f=b.caption,g=b.css;d3.select("".concat(c," table")).remove();var h=d3.select(c).append("table").attr("class","datatable");g&&h.attr("class","datatable ".concat(g)),f&&h.append("caption").text(f);var i=h.append("thead").attr("class","datatable-head").append("tr").attr("role","row").selectAll("th").data(e).enter().append("th").attr("scope","col").attr("class",function(a,b){return"column-".concat(b+1)}).text(function(a){return a}),j=h.append("tbody").attr("class","datatable-body"),k=j.selectAll("tr").data(d).enter().append("tr").attr("role","row"),l=k.selectAll("td").data(function(a){return e.map(function(b){return{column:b,value:a[b]}})}).enter().append("td").attr("role","cell").attr("class",function(b,c){return a(b.value,c)});l.text(function(a){return a.value}),l.append("span").attr("class","hidden-colname").attr("aria-hidden","true").text(function(a){return a.column}).lower()}Shiny.addCustomMessageHandler("render_datatable",function(a){setTimeout(function(){b({id:a[0],data:a[1],columns:a[2],caption:a[3],css:a[4]})},500)})}();var map=function(){return mapboxgl.accessToken="pk.eyJ1IjoiZGNydXZvbG8iLCJhIjoiY2psaW9mZXpmMDNkZDNxcG54cDd2OTJ4YyJ9.qjJnQuhtjHfZ4zBzRyB74g",{render_mapbox:function(a){var b=new mapboxgl.Map({container:a,style:"mapbox://styles/mapbox/dark-v10",center:[11.3351122,44.4941305],pitch:10,zoom:0,maxBounds:[[-33.014707,29.886634],[98.988014,75.898085]],antialias:!0});b.on("load",function(){for(var a,c=b.getStyle().layers,d=0;d<c.length;d++)if("symbol"===c[d].type&&c[d].layout["text-field"]){a=c[d].id;break}b.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},a),b.addSource("destinations",{type:"geojson",data:"https://raw.githubusercontent.com/davidruvolo51/travel-app/master/www/data/travel.geojson"}),b.addLayer({id:"locations",type:"circle",source:"destinations",paint:{"circle-radius":{base:1.75,stops:[[12,2],[22,180]]},"circle-color":["match",["get","type"],"brewery","#66c2a5","cafe","#fc8d62","museum","#8da0cb","#ffffff"]}}),b.addLayer({id:"destinations",type:"symbol",source:"destinations",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":{base:.7,type:"exponential",stops:[[10,0],[12,.8],[15,.8],[18,1]]}}}),b.on("mouseenter","destinations",function(){b.getCanvas().style.cursor="pointer"}),b.on("click","destinations",function(a){var c=Math.abs;b.getCanvas().style.cursor="pointer";for(var d=a.features[0].geometry.coordinates.slice(),e="\n                <span class=\"place-type\">".concat(a.features[0].properties.type,"</span>\n                <strong class=\"place-name\">").concat(a.features[0].properties.name,"</strong>\n                <span class=\"place-city\">").concat(a.features[0].properties.city,"</span>\n                <span class=\"place-country\">").concat(a.features[0].properties.country,"</span>\n                <span class=\"place-id\">").concat(a.features[0].properties.id,"</span>\n            ");180<c(a.lngLat.lng-d[0]);)d[0]+=a.lngLat.lng>d[0]?360:-360;new mapboxgl.Popup({className:"place-popup"}).setMaxWidth("300px").setLngLat(d).setHTML(e).addTo(b)}),b.on("mouseleave","destinations",function(){b.getCanvas().style.cursor=""})})}}}();
